<div class="container">
  <h2>AI Guesses Your Word</h2>
  <app-game-header
    [username]="username"
    [round]="roundNumber"
    [difficulty]="currentDifficulty"
    [correctAnswers]="gameService.aiStats.correct"
    [wrongAnswers]="gameService.aiStats.wrong"
    [userTimeLeft]="userGuessTimeLeft"
    [aiTimeLeft]="aiGuessTimeLeft"
    [aiStats]="gameService.aiStats"
    [userStats]="gameService.userStats"
  ></app-game-header>

  <div class="selected-word" *ngIf="correctWord">
    <strong>Your word:</strong> {{ correctWord }}
  </div>

  <div class="description-input">
    <textarea
      [(ngModel)]="userDescription"
      placeholder="Describe your word for the AI to guess..."
      rows="4"
    ></textarea>
    <div style="display: flex; gap: 1rem; margin-top: 0.5rem">
      <button (click)="submitDescription()">Let AI Guess</button>
      <button (click)="handleSkip()">Skip (-5s)</button>
    </div>
  </div>

  <div
    *ngIf="aiGuess"
    class="ai-guess"
    [ngStyle]="{
      backgroundColor: isAiGuessCorrect ? '#d4edda' : '#f8d7da',
      color: isAiGuessCorrect ? '#155724' : '#721c24',
      padding: '0.5rem 1rem',
      borderRadius: '6px',
      marginTop: '1rem',
      fontWeight: 'bold'
    }"
  >
    AI's guess: {{ aiGuess }}
  </div>

  <div *ngIf="showHintInput" class="hint-input">
    <textarea
      [(ngModel)]="userHint"
      placeholder="Provide a hint for the AI..."
      rows="2"
    ></textarea>
    <button (click)="submitHint()">Submit Hint</button>
  </div>

  <div *ngIf="feedback" class="feedback">
    {{ feedback }}
  </div>

  <div *ngIf="gameService.aiStats.wrong >= 2 && hintUsed < 3">
    <textarea
      [(ngModel)]="userHint"
      placeholder="Provide a hint for the AI..."
    ></textarea>
    <button (click)="submitHint()">Submit Hint</button>
  </div>

  <div class="back-button">
    <button (click)="goBack()">Back to Start</button>
  </div>
</div>
